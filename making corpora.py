import requests
import sys
from bs4 import BeautifulSoup

HOST = "https://wiktenauer.com/"
HEADERS = {
    'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9',
    "User-Agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/88.0.4324.182 Safari/537.36"
}

def get_html(url, params=''):
    r = requests.get(url, headers=HEADERS, params=params)
    return r

def get_imalink(html):
    soup = BeautifulSoup(html, 'html.parser')
    items = soup.find_all('caption')
    cards = []

    for item in items:
        try:
            cards.append(HOST + item.find('a').get('href'))
        except Exception:
            pass
    return cards

def get_text(html):
    soup = BeautifulSoup(html, 'html.parser')
    items = soup.find_all('div', class_="mw-parser-output")
    cards = []

    for item in items:
        try:
            cards.append(item.get_text())
        except Exception:
            pass
    return cards

def gotopages():
    global listof
    imlinks = []
    for i in range(len(listof)):
        html = get_html(listof[i])
        imlinks.extend(get_imalink(html.text))
        print("Закончил страницу ", i)
    return imlinks

def makeitgreat(imlinks):
    corp = open("corp.txt", 'w', encoding="utf-8")
    for i in range(len(imlinks)):
        print('Я на ', i+1, "вкладке!")
        html = get_html(imlinks[i])
        for j in get_text(html.text):
            corp.write(j)
    corp.close()


listof = ['https://wiktenauer.com/wiki/Index:Oxyrhynchus_Papyrus_(MS_P.Oxy.III.466)', 'https://wiktenauer.com/wiki/Index:Walpurgis_Fechtbuch_(MS_I.33)', 'https://wiktenauer.com/wiki/Index:Le_Jeu_de_la_Hache_(MS_Fran%C3%A7ais_1996)', 'https://wiktenauer.com/wiki/Index:Pol_Hausbuch_(MS_3227a)', 'https://wiktenauer.com/wiki/Index:Fior_di_Battaglia_(MS_Ludwig_XV_13)', 'https://wiktenauer.com/wiki/Index:Fior_di_Battaglia_(MS_M.383)', 'https://wiktenauer.com/wiki/Index:Flos_Duellatorum_(Pisani_Dossi_MS)', 'https://wiktenauer.com/wiki/Index:Florius_de_Arte_Luctandi_(MS_Latin_11269)', 'https://wiktenauer.com/wiki/Index:Modus_Dimicandi_(MS_G.B.f.18a)', 'https://wiktenauer.com/wiki/Index:Die_Blume_des_Kampfes_(Cod.5278)', 'https://wiktenauer.com/wiki/Index:Codex_Wallerstein_(Cod.I.6.4%C2%BA.2)', 'https://wiktenauer.com/wiki/Index:Hec_Sunt_Guardiae_in_Dimicatione_Videlicet_(MS_01020)', 'https://wiktenauer.com/wiki/Index:Kunst_und_Wunderbuch_(Cod.Pal.lat.1888)', 'https://wiktenauer.com/wiki/Index:Gladiatoria_(MS_KK5013)', 'https://wiktenauer.com/wiki/Index:Gladiatoria_(MS_U860.F46_1450)', 'https://wiktenauer.com/wiki/Index:Sammelhandschrift_zur_Kriegskunst_(Cod.3062)', 'https://wiktenauer.com/wiki/Index:Bem_cavalgar_(MS_Portugais_5)', 'https://wiktenauer.com/wiki/Index:Man_yt_Wol_(MS_Harley_3542)', 'https://wiktenauer.com/wiki/Index:Gladiatoria_(MS_Germ.Quart.16)', 'https://wiktenauer.com/wiki/Index:Cod.11093', 'https://wiktenauer.com/wiki/Index:Talhoffer_Fechtbuch_(MS_XIX.17-3)', 'https://wiktenauer.com/wiki/Index:Talhoffer_Fechtbuch_(MS_Chart.A.558)', 'https://wiktenauer.com/wiki/Index:Cotton_MS_Titus_A_XXV', 'https://wiktenauer.com/wiki/Index:Talhoffer_Fechtbuch_(MS_78.A.15)', 'https://wiktenauer.com/wiki/Index:Starhemberg_Fechtbuch_(Cod.44.A.8)', 'https://wiktenauer.com/wiki/Index:Talhoffer_Fechtbuch_(MS_Thott.290.2%C2%BA)', 'https://wiktenauer.com/wiki/Index:Knyghthode_and_Bataile_(MS.243)', 'https://wiktenauer.com/wiki/Index:Paulus_Kal_Fechtbuch_(MS_1825)', 'https://wiktenauer.com/wiki/Index:Codex_Lew_(Cod.I.6.4%C2%BA.3)', 'https://wiktenauer.com/wiki/Index:Schwabenspiegel_Codex_(Cgm_558)', 'https://wiktenauer.com/wiki/Index:Wolfenb%C3%BCttel_Picture_Book_(Cod.Guelf.78.2_Aug.2%C2%BA)', 'https://wiktenauer.com/wiki/Index:Talhoffer_Fechtbuch_(Cod.icon._394a)', 'https://wiktenauer.com/wiki/Index:Paulus_Kal_Fechtbuch_(Cgm_1507)', 'https://wiktenauer.com/wiki/Index:Paulus_Kal_Fechtbuch_(Gotti_MS)', 'https://wiktenauer.com/wiki/Index:Kunst_des_Messerfechtens_(Cod.Pal.Germ.430)', 'https://wiktenauer.com/wiki/Index:Die_Meisterlieder_des_Hans_Folz_(MS_Q.566)', 'https://wiktenauer.com/wiki/Index:Ambraser_Codex_(MS_KK5342)', 'https://wiktenauer.com/wiki/Index:Paulus_Kal_Fechtbuch_(MS_KK5126)', 'https://wiktenauer.com/wiki/Index:Cluny_Fechtbuch_(Cl._23842)', 'https://wiktenauer.com/wiki/Index:Kunst_des_Messerfechtens_(Cgm_582)', 'https://wiktenauer.com/wiki/Index:De_Arte_Gladiatoria_Dimicandi_(MS_Vitt.Em.1324)', 'https://wiktenauer.com/wiki/Index:Codex_Speyer_(MS_M.I.29)', 'https://wiktenauer.com/wiki/Index:De_la_Palestra_(alfa.T.7.25)', 'https://wiktenauer.com/wiki/Index:Kunste_Zu_Ritterlicher_Were_(MS_KK5012)', 'https://wiktenauer.com/wiki/Index:Eyb_Kriegsbuch_(MS_B.26)', 'https://wiktenauer.com/wiki/Index:Fechtregeln_(MS_Best.7020_(W*)150)', 'https://wiktenauer.com/wiki/Index:Knyghthode_and_Bataile_(Ashmole_MS_45_II)', 'https://wiktenauer.com/wiki/Index:Falkner_Turnierbuch', 'https://wiktenauer.com/wiki/Index:Knyghthode_and_Bataile_(Cotton_MS_Titus_A_XXIII)', 'https://wiktenauer.com/wiki/Index:Talhoffer_Fechtbuch_(MS_26.236)', 'https://wiktenauer.com/wiki/Index:Talhoffer_Fechtbuch_(Cod.Ser.Nov.2978)', 'https://wiktenauer.com/wiki/Index:Fechtbuchleinn_(Cod.Guelf.1074.Novi)', 'https://wiktenauer.com/wiki/Index:Anonimo_Riccardiano_(MS_Ricc.2541)', 'https://wiktenauer.com/wiki/Index:Johan_Liechtnawers_Fechtbuch_geschriebenn_(MS_Dresd.C.487)', 'https://wiktenauer.com/wiki/Index:Solothurner_Fechtbuch_(Cod.S.554)', 'https://wiktenauer.com/wiki/Index:Glasgow_Fechtbuch_(MS_E.1939.65.341)', 'https://wiktenauer.com/wiki/Index:Libro_del_exercicio_de_las_armas_(MS_a.IV.23)', 'https://wiktenauer.com/wiki/Index:Anonimo_Bolognese_(MSS_Ravenna_M-345/M-346)', 'https://wiktenauer.com/wiki/Index:Berlin_Picture_Book_(Libr.Pict.A.83)', 'https://wiktenauer.com/wiki/Index:Oplodidaskalia_sive_Armorvm_Tractandorvm_Meditatio_Alberti_Dvreri_(MS_26-232)', 'https://wiktenauer.com/wiki/Index:Albrecht_D%C3%BCrers_Fechtbuch_(Sloane_MS_No.5229)', 'https://wiktenauer.com/wiki/Index:Vechtboek_(MS_BPL.3281)', 'https://wiktenauer.com/wiki/Index:J%C3%B6rg_Wilhalm_Hutters_kunst_zu_Augspurg_(Cod.I.6.2%C2%BA.3)', 'https://wiktenauer.com/wiki/Index:J%C3%B6rg_Wilhalm_Hutters_kunst_zu_Augspurg_(Cod.I.6.4%C2%BA.5)', 'https://wiktenauer.com/wiki/Index:J%C3%B6rg_Wilhalm_Hutters_kunst_zu_Augspurg_(Cgm_3711)', 'https://wiktenauer.com/wiki/Index:Hutter/Sollinger_Fechtbuch_(Cod.I.6.2%C2%BA.2)', 'https://wiktenauer.com/wiki/Index:Liber_Quodlibetarius_(MS_B.200)', 'https://wiktenauer.com/wiki/Index:J%C3%B6rg_Breu_Draftbook_(Cod.I.6.2%C2%BA.4)', 'https://wiktenauer.com/wiki/Index:Gregor_Erhart_Fechtbuch_(MS_E.1939.65.354)', 'https://wiktenauer.com/wiki/Index:Goliath_Fechtbuch_(MS_Germ.Quart.2020)', 'https://wiktenauer.com/wiki/Index:Ledall_Roll_(Additional_MS_39564)', 'https://wiktenauer.com/wiki/Index:%C3%9Cber_die_Fechtkunst_und_den_Ringkampf_(MS_963)', 'https://wiktenauer.com/wiki/Index:Ringer_Kunst_(2%C2%BA_Col.MS.Philos.62)', 'https://wiktenauer.com/wiki/Index:Wassmannsdorff%27s_Fechtbuch', 'https://wiktenauer.com/wiki/Index:Monomachia_ovvero_Arte_di_Scherma_(MS_II.iii.315)', 'https://wiktenauer.com/wiki/Index:Monomachia_ovvero_Arte_di_Scherma_(MS_L.V.23)', 'https://wiktenauer.com/wiki/Index:Hans_Medel_Fechtbuch_(Cod.I.6.2%C2%BA.5)', 'https://wiktenauer.com/wiki/Index:Paulus_Kal_Fechtbuch_(MS_Chart.B.1021)', 'https://wiktenauer.com/wiki/Index:Opus_Amplissimum_de_Arte_Athletica_(MSS_Dresd.C.93/C.94)', 'https://wiktenauer.com/wiki/Index:Opus_Amplissimum_de_Arte_Athletica_(Cod.icon._393)', 'https://wiktenauer.com/wiki/Index:Hugold_Behr%27s_Fechtbuch_(MS_Var.83)', 'https://wiktenauer.com/wiki/Index:Codex_Amberger', 'https://wiktenauer.com/wiki/Index:Opus_Amplissimum_de_Arte_Athletica_(Cod.10825/10826)', 'https://wiktenauer.com/wiki/Index:Rast_Fechtbuch_(Reichsstadt_%22Sch%C3%A4tze%22_Nr._82)', 'https://wiktenauer.com/wiki/Index:Maister_Liechtenawers_Kunstbuech_(Cgm_3712)', 'https://wiktenauer.com/wiki/Index:Joachim_Meyers_F%C3%A4ktbok_(MS_A.4%C2%BA.2)', 'https://wiktenauer.com/wiki/Index:Talhoffer_Fechtbuch_(Cod.I.6.2%C2%BA.1)', 'https://wiktenauer.com/wiki/Index:Hans_Endter_Fechtbuch', 'https://wiktenauer.com/wiki/Index:Las_reglas_del_montante_(CCPB000152417-8)', 'https://wiktenauer.com/wiki/Index:Trattato_d%27uno_Schermo_(Cod.10723)', 'https://wiktenauer.com/wiki/Index:Fechtbuch_zu_Ross_und_zu_Fuss_(MS_Var.82)', 'https://wiktenauer.com/wiki/Index:Sciomachia_et_hoplomachia_(MS_Dresd.C.15)', 'https://wiktenauer.com/wiki/Index:Sobre_el_arte_de_la_esgrima_(MS_II/1579(2))', 'https://wiktenauer.com/wiki/Index:Modo_di_cacciare_mano_all_spada_(MS_Italien_959)', 'https://wiktenauer.com/wiki/Index:Nobilissimo_discorso_intorno_il_schermo_(MS_Italien_1527)', 'https://wiktenauer.com/wiki/Index:K%C3%BCnnst_zu_fechten_vonn_dem_Lienhartt_Sollinger_(Cod.Guelf.38.21_Aug.2%C2%BA)', 'https://wiktenauer.com/wiki/Index:Das_Ander_Theil_Des_Newen_K%C5%AFnstreichen_Fechtb%C5%AFches_(Cod.Guelf.83.4_Aug.8%C2%BA)', 'https://wiktenauer.com/wiki/Index:Verzeichnis_etlicher_St%C3%BCcke_des_Fechtens_im_Rapier_(MS_Germ.Fol.1476)', 'https://wiktenauer.com/wiki/Index:Schermkunst_(VAULT_Case_MS_Fol.U.423.792)', 'https://wiktenauer.com/wiki/Index:Arte_de_Esgrima_(MS_PBA_58)', 'https://wiktenauer.com/wiki/Index:Paradoxes_of_Defence_(Additional_MS_34192)', 'https://wiktenauer.com/wiki/Index:Discorso_del_Gioco_di_Spada_(MS_Urb.lat.1231)', 'https://wiktenauer.com/wiki/Index:Reit_und_Turnierbuch_(MS_KK5247)', 'https://wiktenauer.com/wiki/Index:Lectiones_auf_das_Einfachen_rappier_(4%C2%BA_MS_Math.38)', 'https://wiktenauer.com/wiki/Index:Discorso_sopra_l%27arte_della_scherma_(MS_14.10)', 'https://wiktenauer.com/wiki/Index:Confectbuch_von_Abrichtung_vollst%C3%A4ndiges_Turnierbuch_(Cod.Guelf.1.6.3_Aug.2%C2%BA)', 'https://wiktenauer.com/wiki/Index:Additional_MS_23223', 'https://wiktenauer.com/wiki/Index:La_Scientia_della_Spada_(MS_KB.73.J.38)', 'https://wiktenauer.com/wiki/Index:Oplodidaskalia_sive_Armorvm_Tractandorvm_Meditatio_Alberti_Dvreri_(Cod.1246)', 'https://wiktenauer.com/wiki/Index:Figures_nues,_positions_d%27escrime_%C3%A0_l%27%C3%A9p%C3%A9e_(MS_17)', 'https://wiktenauer.com/wiki/Index:Talhoffer_Fechtbuch_(Cod.Guelf.125.16.Extrav.)', 'https://wiktenauer.com/wiki/Index:Talhoffer_Fechtbuch_(2%C2%BA_Col.MS.Philos.61)', 'https://wiktenauer.com/wiki/Index:Itali%C3%A4nische_Fechtkunst_(MS_Dresd.C.91)', 'https://wiktenauer.com/wiki/Index:Talhoffer_Sammelhandschrift_(2%C2%BA_MS_iurid._29)', 'https://wiktenauer.com/wiki/Index:Scientia_e_Prattica_dell%27Arme_(GI.kgl.Saml.1868.4040)', 'https://wiktenauer.com/wiki/Index:Cort_Bevvijs%27_Van_t%27Rapier_alleen_(MS_KB.72.F.37)', 'https://wiktenauer.com/wiki/Index:Bref_Instructions_vp%C3%B5_My_Pradoxes_of_Defence_(Sloane_MS_No.376)', 'https://wiktenauer.com/wiki/Index:Cabinet_d%27escrime_de_l%27espee_et_poingnardt_(MS_KB.73.J.39)', 'https://wiktenauer.com/wiki/Index:Discours_de_la_th%C3%A9orie_de_la_pratique_et_de_l%E2%80%99excellence_des_armes_(MS_E.1939.65.435)', 'https://wiktenauer.com/wiki/Index:Traite_des_armes_(MS_E.1939.65.359)', 'https://wiktenauer.com/wiki/Index:Traite_des_armes_(MS_E.1939.65.360)', 'https://wiktenauer.com/wiki/Index:Traite_des_armes_(MS_X.911)', 'https://wiktenauer.com/wiki/Index:Fechtbuch_des_einfachen_Rapiers_(MS_germ.qu.1190/1191)', 'https://wiktenauer.com/wiki/Index:Eigentliche_Beschreibung_des_Fechtens_ihm_einfachen_Rappir_(MS_Var.7)', 'https://wiktenauer.com/wiki/Index:Della_Scherma_(MS_381)', 'https://wiktenauer.com/wiki/Index:Eigentliche_beschreibung_des_fechtens_ihm_Einfachen_Rappir_(MS_E.%C3%B6.V.36)', 'https://wiktenauer.com/wiki/Index:Sch%C3%B6ffer_Addenda_(8_ARS_MIL_1090/61)', 'https://wiktenauer.com/wiki/Index:Anweisung_zur_Fechtkunst_(4%C2%BA_MS_Math.2)', 'https://wiktenauer.com/wiki/Index:Las_cien_conclusiones_de_la_destreza_de_las_armas_(MS_Phill.1941)', 'https://wiktenauer.com/wiki/Index:Discours_des_armes_(MS_66S230)', 'https://wiktenauer.com/wiki/Index:B%C5%A9ech_von_fechter_Vnnd_Ringst%C3%BCckhen_z%C5%A9_Ross_vnnd_Fuo%C3%9F_(Cod.10799)', 'https://wiktenauer.com/wiki/Index:Compendio_y_Philosophia_y_Dztreza_de_las_Armas_(MS_R4-B274)', 'https://wiktenauer.com/wiki/Index:Oplosophia_e_Verdadeira_Destreza_das_Armas_(MS_Vermelho.n%C2%BA.91)', 'https://wiktenauer.com/wiki/Index:Compendio_e_discorso_di_tutto_quello_(Cod.10784)', 'https://wiktenauer.com/wiki/Index:Fechtkunst_aus_dem_Italienischen_(MS_Dresd.C.94a)', 'https://wiktenauer.com/wiki/Index:Sobre_la_destreza_de_las_armas_(MS_E.1939.65.398)', 'https://wiktenauer.com/wiki/Index:Memorial_Da_Prattica_do_Montante_(MS_49.III.20.n%C2%BA.21)', 'https://wiktenauer.com/wiki/Index:Fechtbuch_eines_ungenannten_Studenten_(Cod.Guelf.264.23.Extrav.)', 'https://wiktenauer.com/wiki/Index:Phrases_ex_variis_autoribus_quam_studiosissimi_collectae_(MS_Chart.B.2117)', 'https://wiktenauer.com/wiki/Index:Trait%C3%A9_d%27escrime_%C3%A0_pied_et_%C3%A0_cheval_(MS_Fran%C3%A7ais_1236)', 'https://wiktenauer.com/wiki/Index:Eigentliche_Beschreibung_des_Sto%C3%9Ffechtens_(MS_Dresd.C.13)', 'https://wiktenauer.com/wiki/Index:Mathematical_Demonstration_of_the_Sorde_(MS_Harley_5219)', 'https://wiktenauer.com/wiki/Index:Truthe_of_the_Sworde_(MS_Harley_4206)', 'https://wiktenauer.com/wiki/Index:Compendio_di_Scherma_(Cod.256)', 'https://wiktenauer.com/wiki/Index:Fior_di_Battaglia_(MS_XXIV)', 'https://wiktenauer.com/wiki/Index:Talhoffer_Fechtbuch_(MS_014)', 'https://wiktenauer.com/wiki/Index:Reglas_para_La_Destreza_de_Las_Armas_(MS_E.1939.65.597)', 'https://wiktenauer.com/wiki/Index:Anweisung_zum_Fechten_(Fol_351_(c))', 'https://wiktenauer.com/wiki/Index:Die_Adeliche_und_Ritterliche_Fechtkunst_(MS_Best.7010_W*289)', 'https://wiktenauer.com/wiki/Index:Die_Adeliche_und_Ritterliche_Fechtkunst_(MS_Germ._Oct._227)', 'https://wiktenauer.com/wiki/Index:L%27exercice_des_armes_(MS_E.1939.65.488)', 'https://wiktenauer.com/wiki/Index:Anfangsgr%C3%BCnde_der_Fechtkunst_(MS_B.215)', 'https://wiktenauer.com/wiki/Index:Tableau_de_l%27acad%C3%A9mie_d%27armes_(Cod.I.6.2%C2%BA.6)', 'https://wiktenauer.com/wiki/Index:Bref_instructions_upon_my_Paradoxes_of_defence_(MS_1086)', 'https://wiktenauer.com/wiki/Index:Talhoffer_Fechtbuch_(Cod.icon._395)', 'https://wiktenauer.com/wiki/Index:Talhoffer_Fechtbuch_(Cod.icon._394)', 'https://wiktenauer.com/wiki/Index:Reit_und_Turnierbuch_(MS_23.279)', 'https://wiktenauer.com/wiki/Index:Marx_Turnierbuch_(Cgm_1930)', 'https://wiktenauer.com/wiki/Index:Turnierbuch_Ritterspiele_(Cod.icon._398)', 'https://wiktenauer.com/wiki/Index:Eyb_Turnierbuch_(Cgm_961)', 'https://wiktenauer.com/wiki/Index:Burgkmair_Turnierbuch_(Wittelsbach_MS)', 'https://wiktenauer.com/wiki/Index:Th%C5%AFrn%E1%BA%99er_und_Scharpfrennen_(Cod.I.6.4%C2%BA.1)', 'https://wiktenauer.com/wiki/Index:Burgkmair_Turnierbuch_(Cod.icon._403)', 'https://wiktenauer.com/wiki/Index:Lamberger_Turnierbuch_(Cod.A.2290)', 'https://wiktenauer.com/wiki/Index:Geschlechterbuch_der_Stadt_Augsburg_(Cod.icon._312b)', 'https://wiktenauer.com/wiki/Index:Nuremberg_Turnierbuch_(MS_22.229)', 'https://wiktenauer.com/wiki/Index:Burgkmair_Turnierbuch_(Hohenzollern_Sigmaringen_MS)', 'https://wiktenauer.com/wiki/Index:Tournament_Book_(MS_Ludwig_XV_14)', 'https://wiktenauer.com/wiki/Index:Kriegsbuch_u.a._%C3%9Cber_Sch%C3%BCtzen-_und_Turnierwesen_(MS_B.213)', 'https://wiktenauer.com/wiki/Index:Einige_Figuren_von_Fus-Thurnieren_(2%C2%BA_MS_Math.7)']

makeitgreat(gotopages())